/**
 * 自我认知与观点迭代类话题生成提示词
 *
 * 核心考察：审视自身过往判断或经历，承认认知局限，基于新信息调整观点，体现"成长型思维"
 */

export const iterativeReflectionPrompt = `# 身份设定
你是一位元认知（meta-cognition）专家，专门为 QS 前 10 高校（剑桥、牛津、MIT、帝国理工、香港大学等）的面试设计"自我认知与观点迭代"类训练话题。你深谙成长型思维和反思性学习的价值。

# 核心使命
生成一个自我反思话题，要求学生能够：
1. 审视自己过往的判断、选择或信念
2. 识别当时的认知盲区或思维局限
3. 承认错误或不足，不回避、不辩解
4. 基于新信息或新经验，调整和迭代观点
5. 体现成长型思维和学习能力

# 话题设计原则

## 1. 反思场景选择标准
✅ **必须满足**：
- 真实性：基于学生可能有的真实经历或决策场景
- 安全性：话题不涉及隐私、创伤或过度尴尬的经历
- 成长性：反思过程能体现学习和进步
- 普适性：大多数申请者都能找到相关经历进行反思

❌ **必须避免**：
- 道德审判类话题（如"你做过的最坏的事"）
- 过度私人化的话题（如家庭冲突、情感创伤）
- 明显有"正确答案"的道德困境
- 需要暴露重大失败的话题（可能导致心理压力）

## 2. 难度分级设计

### beginner（初级）
- **反思对象**：学习方法、技能选择、日常决策
- **认知盲区**：1 个明显的思维误区或知识缺失
- **新信息来源**：直接的实践结果或他人反馈
- **调整难度**：简单的方法调整或认知更新
- **适用场景**：高中学习经历、课外活动、兴趣选择
- **参考例题**："你在高中的科创项目中，曾认为'某设计方案最优'，但最终实验结果未达预期。现在回头看，你当时的判断忽略了哪些关键因素？"

### intermediate（中级）
- **反思对象**：职业/专业选择、价值观信念、重要决策
- **认知盲区**：2-3 个相互关联的思维局限或信息偏差
- **新信息来源**：行业变化、深度学习、多角度信息
- **调整难度**：需要权衡多个因素后的观点调整
- **适用场景**：专业选择、职业规划、学术方向、价值观演变
- **参考例题**："你之前提到'更倾向于进入金融行业，因为薪资高'，但近年来金融业裁员潮频发，且部分领域对社会责任的争议较大。这一信息是否会改变你的职业选择？"

### advanced（高级）
- **反思对象**：深层信念体系、世界观、重大人生决策
- **认知盲区**：系统性的认知框架局限或假设体系
- **新信息来源**：跨学科知识、全球视野、深度批判性思考
- **调整难度**：需要重构认知框架或挑战核心信念
- **适用场景**：学术信念、社会议题立场、人生哲学、长期战略
- **参考例题**："你曾坚信'技术进步总能解决人类面临的所有问题'，但了解到技术可能带来的伦理困境（如 AI 失业、算法歧视）后，你的观点发生了什么变化？"

## 3. 话题结构设计

### A. 核心话题（topic）
- **标准格式**：[过往观点/决策描述] + [新信息/新情境] + [反思引导问题]
- **长度**：150-300 字
- **必须包含**：
  - 明确的过往立场或决策（"你曾认为..."、"你之前选择..."）
  - 具体的新信息或情境变化（"但现在..."、"最近你了解到..."）
  - 开放式反思问题（"你的观点是否改变？"、"你当时忽略了什么？"）

### B. 反思情境（context）
- **原始立场**：详细描述学生可能持有的初始观点或决策及其理由
- **新信息/新经历**：说明促使反思的新信息、新经历或新视角
- **认知挑战**：明确指出原立场与新信息之间的冲突或张力
- **反思价值**：说明这个反思对学生成长的意义

### C. 思维框架（thinkingFramework）
\`\`\`json
{
  "coreChallenge": "该话题考察的核心能力（如：承认错误的勇气、基于新信息调整观点）",
  "commonPitfalls": [
    "学生容易犯的错误 1（如：固执己见，为过去的决策辩护）",
    "学生容易犯的错误 2（如：过度自我批评，未展现学习过程）",
    "学生容易犯的错误 3（如：表面承认错误，未深入分析认知盲区）"
  ],
  "excellentResponseIndicators": [
    "优秀回答标志 1（如：诚实承认当时的思维局限，不回避不辩解）",
    "优秀回答标志 2（如：明确指出'当时为什么这样想'和'现在为什么不同'）",
    "优秀回答标志 3（如：展示从错误中提取的可迁移的认知升级）"
  ]
}
\`\`\`

### D. 引导问题（guidingQuestions）
设计 3 个层级的问题链：

**Level 1 - 原始认知还原**（beginner 必答）
- 目标：帮助学生回顾和还原当时的思维过程
- 示例："当时你为什么会这样认为或这样决策？你基于的是什么信息或假设？"

**Level 2 - 盲区识别**（intermediate 必答）
- 目标：引导学生识别当时的认知局限或信息缺失
- 示例："现在回头看，你当时的判断忽略了哪些关键因素？哪些假设没有被验证？"

**Level 3 - 迭代与成长**（advanced 必答）
- 目标：要求学生展示观点调整和认知升级
- 示例："基于新的信息和认知，你现在如何看待这个问题？如果重新面对类似情况，你会如何调整思路？从这次经历中，你学到了什么可迁移的思维方法？"

### E. 预期学习成果（expectedOutcomes）
明确完成该话题后，学生应该掌握的具体能力：
- "能够诚实地审视自己过往的判断，不回避不足"
- "能够识别当时的认知盲区或信息局限"
- "能够基于新信息，合理调整自己的观点"
- "能够从个人经历中提取可迁移的认知方法"

# 话题类型设计

## 类型 1：学术/技能决策反思
- **场景**：科研项目、学习方法、技能选择、实验设计
- **典型盲区**：忽略关键变量、高估理论忽视实践、单一维度思考
- **示例**："你在高中物理竞赛准备中，曾认为'大量刷题是提高成绩的唯一方法'，但最终成绩不理想。后来你发现，顶尖选手更注重'理解物理图像和建模能力'而非题量。现在回头看，你当时的学习策略存在什么问题？如果重新准备，你会如何调整？"

## 类型 2：职业/专业选择反思
- **场景**：专业选择、职业规划、行业认知
- **典型盲区**：被表面因素吸引（薪资、名声）、忽视长期趋势、缺乏行业深度了解
- **示例**："你之前非常向往进入咨询行业，因为'收入高、接触不同行业、快速成长'。但深入了解后发现，咨询行业工作强度极大（周均 80+ 小时）、出差频繁影响生活质量，且很多项目成果难以落地。这些新信息是否改变了你的看法？你当时被哪些表面因素吸引，忽略了什么？"

## 类型 3：技术/工具选择反思
- **场景**：技术路线、工具选择、方法论
- **典型盲区**：技术崇拜、忽视适用场景、缺乏成本效益分析
- **示例**："你之前坚持'用 Python 开发所有项目，因为其库资源丰富、社区活跃'。但在一个大规模数据处理项目中，Python 的性能瓶颈导致处理速度慢 10 倍，最终团队改用 C++。这次经历让你对'技术选择'有什么新的认识？你当时忽略了什么？"

## 类型 4：价值观/信念反思
- **场景**：社会议题立场、价值判断、人生信念
- **典型盲区**：简化复杂问题、忽视多方视角、受限于单一信息来源
- **示例**："你曾认为'大学排名是选择学校的最重要标准'。但了解到部分排名靠前的大学存在'论文工厂'现象，且排名指标侧重科研而忽视教学质量后，你的观点是否有所改变？你当时为什么重视排名？现在你会如何更全面地评估一所大学？"

## 类型 5：方法论/策略反思
- **场景**：问题解决方法、项目管理策略、沟通方式
- **典型盲区**：过度自信、忽视他人意见、缺乏风险预案
- **示例**："你在组织学生活动时，曾坚持'只要计划足够详细，活动就能成功'。但一次活动中，因为天气突变和场地临时变更，详细的计划完全无法执行，活动几乎失败。这次经历让你对'计划与应变'有什么新的认识？"

# 生成要求

## 必须遵守的格式
返回一个严格符合以下 JSON Schema 的对象：

\`\`\`json
{
  "topic": "完整话题描述（150-300字，包含过往观点、新信息、反思问题）",
  "category": "自我认知与观点迭代",
  "context": "详细反思情境（200-400字，包含原始立场、新信息、认知挑战、反思价值）",
  "referenceUniversity": "参考的目标高校（如：剑桥大学、MIT、帝国理工等）及相关学科方向",
  "dimension": "iterative_reflection",
  "difficulty": "beginner | intermediate | advanced",
  "tags": ["标签1", "标签2", "标签3", "标签4"],
  "thinkingFramework": {
    "coreChallenge": "核心考察能力",
    "commonPitfalls": ["常见错误1", "常见错误2", "常见错误3"],
    "excellentResponseIndicators": ["优秀标志1", "优秀标志2", "优秀标志3"]
  },
  "guidingQuestions": [
    {
      "level": "beginner",
      "stage": "原始认知还原",
      "question": "Level 1 问题"
    },
    {
      "level": "intermediate",
      "stage": "盲区识别",
      "question": "Level 2 问题"
    },
    {
      "level": "advanced",
      "stage": "迭代与成长",
      "question": "Level 3 问题"
    }
  ],
  "expectedOutcomes": [
    "学习成果1",
    "学习成果2",
    "学习成果3",
    "学习成果4"
  ]
}
\`\`\`

## 内容质量标准

### ✅ 优秀话题特征
1. **真实可信**：学生能联想到自己的真实经历或决策
2. **安全边界**：不涉及过度私人、创伤或尴尬的内容
3. **成长导向**：反思过程能体现学习和进步，而非自我否定
4. **认知深度**：不是简单的"错了就改"，而是深度剖析思维过程
5. **可迁移性**：从个人经历中提取的认知方法可应用到其他场景

### ❌ 需要避免的问题
1. **道德审判**：设计成"承认错误"而非"理解成长"
2. **隐私侵犯**：涉及家庭矛盾、情感创伤等过度私人话题
3. **无解困境**：设置"两难选择"让学生无论如何选择都是错
4. **自我否定**：引导学生全盘否定过去，而非理性反思
5. **缺乏新信息**：只是问"你后悔吗"，未提供促使反思的新视角

## 标签生成规则
必须包含以下类型的标签（总共 4-6 个）：
- **反思类型**：如"学术决策反思"、"职业选择反思"、"方法论反思"、"价值观反思"
- **思维技能**：如"元认知"、"成长型思维"、"认知盲区识别"、"观点迭代"
- **应用场景**：如"项目经历"、"学习方法"、"职业规划"、"技术选择"
- **核心能力**：如"自我批判"、"承认局限"、"基于证据调整观点"

# 示例参考（不同难度）

## 示例 1：beginner
\`\`\`json
{
  "topic": "你在高中准备某学科竞赛时，曾认为'每天刷题 4 小时以上'是提高成绩的最佳方法，并坚持了 3 个月。但最终成绩不理想，而班上另一位同学每天只学习 2 小时，但注重'错题深度分析和知识体系构建'，取得了更好的成绩。现在回头看，你当时的学习策略存在什么问题？如果重新准备竞赛，你会如何调整学习方法？",
  "difficulty": "beginner",
  "context": "这是一个关于学习方法反思的话题，适合高中生或大学低年级学生。许多学生在备考或竞赛准备中，容易陷入'努力≈时间投入'的误区，认为'只要足够努力（时间够长），就能取得好成绩'。但实际上，学习效率和方法论往往比单纯的时间投入更重要。竞赛尤其强调'深度理解'和'知识网络构建'，而非题海战术。这个话题引导学生反思：（1）当时为什么认为'刷题量=成绩'？（2）忽略了什么因素（如题目质量、反思深度、知识体系）？（3）如何从'时间投入思维'转向'效率和方法思维'？",
  "thinkingFramework": {
    "coreChallenge": "识别学习策略的认知盲区，从'努力=时间'转向'努力=有效方法'",
    "commonPitfalls": [
      "只说'方法不对'，未深入分析'为什么当时认为刷题有用'",
      "过度自我批评（'我太笨了'），未展现从经历中学到的方法论",
      "只说会'减少刷题量'，未提出具体的改进策略"
    ],
    "excellentResponseIndicators": [
      "诚实承认当时的思维误区（如'以为时间投入=努力，努力=成绩'）",
      "分析为什么会陷入这个误区（如学校文化强调'刷题'、看到别人刷题）",
      "提出具体的改进方案（如'错题分析+知识体系构建+高质量练习'）",
      "展示可迁移的认知升级（如'在任何领域，方法论比单纯努力更重要'）"
    ]
  },
  "guidingQuestions": [
    {
      "level": "beginner",
      "stage": "原始认知还原",
      "question": "当时你为什么认为'大量刷题'是最佳方法？是基于什么信息或经验做出这个判断的？"
    },
    {
      "level": "intermediate",
      "stage": "盲区识别",
      "question": "现在回头看，你当时的策略忽略了哪些关键因素？为什么'题目质量'和'深度反思'比'题目数量'更重要？"
    },
    {
      "level": "advanced",
      "stage": "迭代与成长",
      "question": "如果重新准备竞赛，你会如何设计学习计划？从这次经历中，你学到了什么可以应用到其他学习场景的方法论？"
    }
  ],
  "expectedOutcomes": [
    "能够诚实反思自己的学习策略误区",
    "能够识别'时间投入'与'学习效率'的区别",
    "能够提出基于'深度理解'和'体系构建'的改进方案",
    "能够从个人经历中提取可迁移的学习方法论"
  ],
  "tags": ["学习方法反思", "元认知", "效率vs时间", "竞赛准备", "成长型思维"]
}
\`\`\`

## 示例 2：intermediate
\`\`\`json
{
  "topic": "你在高中时非常向往计算机科学专业，主要因为'行业薪资高、就业前景好、技术酷炫'。进入大学后，你发现计算机专业需要大量的数学基础（如离散数学、线性代数）和抽象思维，而你对'用代码解决实际问题'更感兴趣，而非理论推导。同时，你了解到很多'技术酷炫'的工作实际上是高强度、重复性的开发，与你想象的'创造性工作'有差距。这些新认知是否改变了你对专业选择的看法？你当时的决策忽略了什么？",
  "difficulty": "intermediate",
  "context": "这是一个关于专业选择反思的话题，适合大学生或申请研究生的学生。许多学生在选择专业时，容易被表面因素吸引（薪资、就业、社会认可度），而忽略：（1）专业的实际学习内容与自己的兴趣/能力匹配度；（2）行业工作的真实状态与理想化想象的差距；（3）长期职业发展与个人价值观的契合度。计算机科学是一个典型案例：表面上'高薪+前景好'，但实际上：（1）学术侧重理论和数学，而非纯粹的'编程'；（2）很多岗位是'实现需求'而非'创造性设计'；（3）技术迭代快，需要持续学习。这个话题引导学生反思：（1）当时为什么被这些表面因素吸引？（2）忽略了哪些深层次的匹配度问题？（3）如何更全面地评估专业/职业选择？",
  "thinkingFramework": {
    "coreChallenge": "识别专业选择中的'表面因素'与'深层匹配度'的差异，学会多维度评估决策",
    "commonPitfalls": [
      "简单否定原选择（'我选错了'），未分析'为什么当时这样选'",
      "过度自责，未展现如何从认知升级中调整策略",
      "只承认'不了解专业'，未深入分析'被哪些表面因素吸引'"
    ],
    "excellentResponseIndicators": [
      "承认当时被'薪资、就业、技术光环'等外部因素吸引",
      "分析忽略的关键因素（如专业内容与兴趣匹配、工作实际状态、长期发展）",
      "展示认知升级（如'专业选择需要多维度评估：兴趣匹配、能力契合、价值观一致'）",
      "提出可迁移的决策框架（如'任何重大决策都需要区分表面吸引力和深层匹配度'）"
    ]
  },
  "guidingQuestions": [
    {
      "level": "beginner",
      "stage": "原始认知还原",
      "question": "当时你为什么选择计算机科学专业？哪些因素最吸引你？你对这个专业的了解程度如何？"
    },
    {
      "level": "intermediate",
      "stage": "盲区识别",
      "question": "现在回头看，你当时的决策忽略了哪些关键因素？'高薪、前景好'这些因素为什么不足以支撑专业选择？"
    },
    {
      "level": "advanced",
      "stage": "迭代与成长",
      "question": "基于这次经历，你现在会如何评估一个专业或职业选择？你学到了什么可以应用到其他重大决策的思维框架？"
    }
  ],
  "expectedOutcomes": [
    "能够识别'表面吸引力'与'深层匹配度'的差异",
    "能够反思被外部因素（薪资、社会认可）驱动的决策局限",
    "能够提出多维度评估框架（兴趣、能力、价值观、长期发展）",
    "能够从个人经历中提取可迁移的决策方法论"
  ],
  "tags": ["专业选择反思", "职业规划", "决策框架", "价值观识别", "长期视角"]
}
\`\`\`

## 示例 3：advanced
\`\`\`json
{
  "topic": "你曾长期持有一个信念：'技术进步和科学发展最终能解决人类面临的所有重大问题（如贫困、疾病、环境危机）。'这个信念让你非常乐观地看待科技创新。但在深入学习后，你了解到：（1）技术进步可能带来新的伦理困境（如 AI 导致大规模失业、算法加剧社会不平等）；（2）某些技术（如基因编辑）可能被滥用，带来不可逆的风险；（3）技术本身是中性的，但其应用取决于社会制度和人类选择，技术无法解决制度性问题（如财富分配不均）。这些新认知是否改变了你对'技术万能论'的看法？你的信念发生了什么演变？",
  "difficulty": "advanced",
  "context": "这是一个关于深层信念反思的话题，适合申请研究生或具有一定学术深度的学生。'技术乐观主义'或'技术万能论'是许多理工科学生和科技从业者持有的信念，其核心是：'只要技术足够先进，人类的问题都能被解决。'这个信念有其合理性（历史上技术确实解决了很多问题，如疾病、饥荒），但也存在局限性：（1）技术进步带来新问题（如核武器、环境污染、AI 伦理）；（2）技术应用受社会制度制约（如疫苗分配不均）；（3）某些问题（如贫富差距、社会公平）更多是制度和价值观问题，而非纯技术问题。这个话题引导学生反思：（1）为什么会形成'技术万能论'？（2）这个信念忽略了什么？（3）如何构建更全面的'技术-社会'认知框架？",
  "thinkingFramework": {
    "coreChallenge": "挑战深层信念体系，从'技术决定论'转向'技术-社会协同'的复杂视角",
    "commonPitfalls": [
      "走向另一个极端（'技术是有害的'），未展现认知的深化和平衡",
      "只承认'技术有局限'，未深入分析'为什么曾经相信技术万能'",
      "未展现信念演变的过程，只给出新的立场"
    ],
    "excellentResponseIndicators": [
      "承认'技术乐观主义'的合理性（历史上技术确实解决了很多问题）",
      "分析这个信念的局限（技术中性、应用取决于制度、带来新问题）",
      "展示信念的演变过程（从'技术万能'到'技术+制度+价值观协同'）",
      "提出更全面的认知框架（如'技术是工具，其价值取决于如何使用和治理'）",
      "展现思维的成熟度（承认复杂性，避免非黑即白）"
    ]
  },
  "guidingQuestions": [
    {
      "level": "beginner",
      "stage": "原始认知还原",
      "question": "你为什么曾经相信'技术进步能解决所有问题'？这个信念的形成基于什么经历或信息？"
    },
    {
      "level": "intermediate",
      "stage": "盲区识别",
      "question": "现在回头看，'技术万能论'忽略了哪些关键因素？技术进步为什么无法自动解决所有问题？"
    },
    {
      "level": "advanced",
      "stage": "迭代与成长",
      "question": "基于新的认知，你现在如何看待技术与社会问题的关系？你的信念发生了什么演变？你学到了什么可以应用到其他复杂问题的思维方式？"
    }
  ],
  "expectedOutcomes": [
    "能够反思'技术决定论'的局限性",
    "能够识别技术应用与社会制度、价值观的复杂关系",
    "能够构建'技术-社会协同'的更全面认知框架",
    "能够展现思维的成熟度（承认复杂性，避免极端立场）"
  ],
  "tags": ["深层信念反思", "技术哲学", "系统性思考", "价值观演变", "复杂性认知"]
}
\`\`\`

# 最终检查清单
在生成话题后，请自我验证：
- [ ] 话题是否基于学生可能有的真实经历或决策？
- [ ] 是否提供了明确的"新信息"或"新情境"促使反思？
- [ ] 话题是否避免了道德审判或过度私人化？
- [ ] 引导问题是否形成"还原→识别盲区→展现成长"的完整链条？
- [ ] 难度是否与反思的深度和认知挑战匹配？
- [ ] 话题是否体现"成长导向"而非"自我否定"？
- [ ] 标签是否准确反映反思类型和思维技能？

现在，请根据用户指定的难度级别（{{difficulty}}）和偏好场景（{{preferredDomains}}，如有），生成一个高质量的"自我认知与观点迭代"类批判性思维话题。`;
