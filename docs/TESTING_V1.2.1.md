# v1.2.1 测试指南

## 🎯 本次更新内容

### 1. Markdown渲染优化
- AI消息（包括总结）现在支持Markdown格式渲染
- 支持标题、列表、加粗、斜体、代码块等格式

### 2. 智能助手面板控制
- 添加"显示/隐藏助手"切换按钮
- 用户可随时控制助手面板显示状态

## 📋 测试步骤

### 测试1: Markdown渲染

**目的**: 验证总结内容正确渲染Markdown格式

1. **启动开发服务器**
   ```bash
   npm run dev
   ```

2. **创建新对话**
   - 访问 `/conversations`
   - 点击"开始新对话"
   - 输入话题（例如："四天工作制是否真的能提高生产力?"）

3. **进行对话**
   - 进行至少1轮问答
   - 回答AI的问题

4. **生成总结**
   - 点击右侧助手面板的"✅ 结束并总结"按钮
   - 观察左侧对话窗口

5. **验证Markdown渲染**
   - ✅ 标题应显示为加粗且字号更大（如 `### 1. 思维发展轨迹`）
   - ✅ 列表应显示为带项目符号的列表
   - ✅ 加粗文本应正确显示（如 `**质疑假设的能力**`）
   - ✅ 内容格式清晰，易于阅读

**预期结果**:
```
📊 对话总结

### 1. 思维发展轨迹 (100-150字)
分析学生的思考过程...

### 2. 批判性思维亮点 (3-5点)
• 质疑假设的能力
• 寻求证据的意识
• 多角度思考

### 3. 可改进之处 (2-3点)
温和地指出思维盲区...

### 4. 延伸思考建议
提出1-2个相关的深度问题...
```

### 测试2: 助手面板控制

**目的**: 验证助手面板显示/隐藏功能

1. **开始对话**（继续使用上一个测试的对话，或创建新对话）

2. **查找切换按钮**
   - 在对话窗口右上角找到"隐藏助手"按钮
   - 按钮应该有图标和文字

3. **点击"隐藏助手"**
   - ✅ 右侧助手面板立即消失
   - ✅ 左侧对话窗口扩展到全宽
   - ✅ 按钮文字变为"显示助手"
   - ✅ 按钮图标方向改变（指向左侧）

4. **点击"显示助手"**
   - ✅ 右侧助手面板重新出现
   - ✅ 左侧对话窗口恢复正常宽度
   - ✅ 按钮文字变为"隐藏助手"
   - ✅ 按钮图标方向改变（指向右侧）

5. **多次切换**
   - 连续点击多次，确认状态切换流畅
   - 无控制台错误
   - 动画过渡自然

### 测试3: 对话结束状态

**目的**: 验证对话结束后的UI状态

1. **完成总结生成**（继续上面的测试）

2. **验证按钮隐藏**
   - ✅ "显示/隐藏助手"按钮自动消失
   - ✅ 输入框显示"对话已结束"
   - ✅ 发送按钮显示"已结束"且禁用

3. **验证助手面板隐藏**
   - ✅ 右侧助手面板不再显示
   - ✅ 左侧对话窗口占据全宽
   - ✅ 总结内容清晰显示

### 测试4: 刷新页面

**目的**: 验证状态持久化（已知限制）

1. **刷新页面**（在对话结束后）
   - 按 `Cmd+R` 或 `Ctrl+R`

2. **验证已知行为**
   - ❌ 对话历史正常加载
   - ❌ 但总结消息丢失（已知限制）
   - ❌ 可以继续输入（状态未持久化）
   - ❌ 助手面板恢复显示

**注意**: 这些是已知限制，将在v1.3中修复。

## ✅ 验收标准

### 必须通过
- [x] AI消息正确渲染Markdown格式
- [x] 总结内容格式清晰易读
- [x] 切换按钮功能正常
- [x] 助手面板显示/隐藏流畅
- [x] 对话结束后UI状态正确
- [x] 无控制台错误

### 已知限制（可接受）
- [x] 刷新后状态丢失
- [x] 总结消息不保存

## 🐛 问题报告

如果发现问题，请记录：

1. **问题描述**
2. **重现步骤**
3. **预期行为**
4. **实际行为**
5. **截图**（如果适用）
6. **控制台错误**（如果有）

---

**测试人员**: ___________
**测试日期**: ___________
**测试结果**: ⭕ 通过 / ❌ 失败

🤖 Generated with [Claude Code](https://claude.com/claude-code)
