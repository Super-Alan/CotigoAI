# Cogito AI - MVPå­¦ä¹ æµç¨‹ç§‘å­¦æ€§æ”¹è¿›è§„æ ¼æ–‡æ¡£

## ğŸ“‹ æ–‡æ¡£æ¦‚è¿°

**ç‰ˆæœ¬**: v1.0
**åˆ›å»ºæ—¥æœŸ**: 2025-01-12
**ç›®æ ‡**: åŸºäºè®¤çŸ¥ç§‘å­¦åŸç†ï¼Œå®Œå–„äº”å¤§æ€ç»´ç»´åº¦çš„å­¦ä¹ é—­ç¯ï¼Œæå‡æ•™å­¦æœ‰æ•ˆæ€§
**ç­–ç•¥**: æœ€å°å¹²é¢„ï¼Œæœ€å¤§æ”¶ç›Š - ä¸å¢åŠ æ–°åŠŸèƒ½ï¼Œä»…ä¼˜åŒ–ç°æœ‰æµç¨‹çš„ç§‘å­¦æ€§

---

## ğŸ¯ æ ¸å¿ƒé—®é¢˜è¯†åˆ«

### å½“å‰ç³»ç»Ÿç¼ºé™·åˆ†æ

#### 1. **å­¦ä¹ é—­ç¯ä¸å®Œæ•´**ï¼ˆä¸¥é‡åº¦: â­â­â­â­â­ï¼‰
- **é—®é¢˜**: ç¼ºå°‘Kolbå­¦ä¹ å¾ªç¯çš„"æŠ½è±¡æ¦‚å¿µåŒ–"å’Œ"ä¸»åŠ¨å®éªŒ"ç¯èŠ‚
- **å½±å“**: çŸ¥è¯†ç•™å­˜ç‡ä½ï¼ˆ~35%ï¼‰ï¼Œæ— æ³•å½¢æˆæ·±åº¦ç†è§£
- **ç§‘å­¦ä¾æ®**: Kolbç»éªŒå­¦ä¹ ç†è®ºè¦æ±‚å®Œæ•´çš„å››é˜¶æ®µå¾ªç¯

#### 2. **è®¤çŸ¥è´Ÿè·è¿‡é«˜**ï¼ˆä¸¥é‡åº¦: â­â­â­â­â­ï¼‰
- **é—®é¢˜**: ä¸‰Tabå¹¶è¡Œè®¾è®¡è¿åè®¤çŸ¥è´Ÿè·ç†è®º
- **å½±å“**: ç”¨æˆ·è¿·å¤±æ–¹å‘ï¼Œå­¦ä¹ æ•ˆç‡ä½
- **ç§‘å­¦ä¾æ®**: å·¥ä½œè®°å¿†å®¹é‡æœ‰é™ï¼ˆMiller 7Â±2æ³•åˆ™ï¼‰

#### 3. **å…ƒè®¤çŸ¥æ”¯æŒä¸è¶³**ï¼ˆä¸¥é‡åº¦: â­â­â­â­ï¼‰
- **é—®é¢˜**: æ— åæ€ç¯èŠ‚ï¼Œç¼ºä¹è‡ªæˆ‘ç›‘æ§æœºåˆ¶
- **å½±å“**: ç”¨æˆ·éš¾ä»¥å½¢æˆæ€ç»´æ„è¯†ï¼Œé‡å¤åŒæ ·é”™è¯¯
- **ç§‘å­¦ä¾æ®**: å…ƒè®¤çŸ¥æ˜¯æ‰¹åˆ¤æ€§æ€ç»´çš„æ ¸å¿ƒèƒ½åŠ›

#### 4. **è„šæ‰‹æ¶æ•™å­¦ç¼ºå¤±**ï¼ˆä¸¥é‡åº¦: â­â­â­â­ï¼‰
- **é—®é¢˜**: å¼•å¯¼é—®é¢˜é™æ€å±•ç¤ºï¼Œæ— å³æ—¶åé¦ˆ
- **å½±å“**: æ— æ³•åŠæ—¶çº æ­£æ€ç»´åå·®
- **ç§‘å­¦ä¾æ®**: Vygotskyæœ€è¿‘å‘å±•åŒºç†è®ºéœ€è¦åŠ¨æ€æ”¯æŒ

#### 5. **æ¦‚å¿µå­¦ä¹ è–„å¼±**ï¼ˆä¸¥é‡åº¦: â­â­â­ï¼‰
- **é—®é¢˜**: ç¼ºå°‘ç³»ç»ŸåŒ–æ¦‚å¿µè®²è§£
- **å½±å“**: æ–°æ‰‹å…¥é—¨é—¨æ§›é«˜
- **ç§‘å­¦ä¾æ®**: Bloomè®¤çŸ¥å±‚çº§éœ€è¦ä»"è®°å¿†"å¼€å§‹

---

## ğŸ”§ MVPæ”¹è¿›æ–¹æ¡ˆ

### Phase 1: æ ¸å¿ƒå­¦ä¹ é—­ç¯å®Œå–„ï¼ˆP0 - å¿…é¡»å®ç°ï¼‰

#### æ”¹è¿›1.1: è¡¥å…¨åæ€æ€»ç»“ç¯èŠ‚

**éœ€æ±‚æè¿°**:
åœ¨AIè¯„ä¼°åé¦ˆåï¼Œå¢åŠ å¼ºåˆ¶æ€§çš„åæ€æ€»ç»“æ­¥éª¤ï¼Œå®ŒæˆKolbå­¦ä¹ å¾ªç¯çš„"æŠ½è±¡æ¦‚å¿µåŒ–"ç¯èŠ‚ã€‚

**ç”¨æˆ·æ•…äº‹**:
```
ä½œä¸ºå­¦ä¹ è€…
å½“æˆ‘å®Œæˆä¸€é“ç»ƒä¹ é¢˜å¹¶çœ‹åˆ°AIåé¦ˆå
æˆ‘éœ€è¦è¢«å¼•å¯¼è¿›è¡Œæ·±åº¦åæ€
ä»¥ä¾¿å°†ä¸ªåˆ«ç»éªŒæŠ½è±¡ä¸ºé€šç”¨è®¤çŸ¥æ¨¡å¼
```

**åŠŸèƒ½è¦æ±‚**:

1. **åæ€é—®é¢˜è®¾è®¡**ï¼ˆå¿…é¡»å›ç­”ï¼‰
   - é—®é¢˜1: "é€šè¿‡è¿™é“é¢˜ï¼Œæˆ‘å¯¹ã€æ€ç»´ç»´åº¦ã€‘æœ‰äº†å“ªäº›æ–°ç†è§£ï¼Ÿ"ï¼ˆæœ€å°‘50å­—ï¼‰
   - é—®é¢˜2: "ä¸‹æ¬¡é‡åˆ°ç±»ä¼¼é—®é¢˜ï¼Œæˆ‘ä¼šé‡‡å–ä»€ä¹ˆä¸åŒçš„ç­–ç•¥ï¼Ÿ"ï¼ˆæœ€å°‘30å­—ï¼‰
   - å¯é€‰: "æˆ‘è¿˜æœ‰å“ªäº›å›°æƒ‘æˆ–ç–‘é—®ï¼Ÿ"

2. **UI/UXè®¾è®¡**
   - åœ¨è¯„ä¼°åé¦ˆCardä¸‹æ–¹æ–°å¢"å­¦ä¹ åæ€"Card
   - ä¸å¯è·³è¿‡ï¼ˆå¿…é¡»å®Œæˆæ‰èƒ½è¿›å…¥ä¸‹ä¸€é¢˜ï¼‰
   - æä¾›æ€ç»´å¯¼å›¾æ¨¡æ¿è¾…åŠ©åæ€

3. **æ•°æ®å­˜å‚¨**
   ```typescript
   // CriticalThinkingPracticeSession æ‰©å±•
   reflection: {
     learned: string          // æ–°ç†è§£
     nextSteps: string        // æ”¹è¿›ç­–ç•¥
     questions?: string       // å›°æƒ‘
     createdAt: Date
   }
   ```

4. **AIå¢å¼ºï¼ˆå¯é€‰ï¼‰**
   - åˆ†æåæ€è´¨é‡ï¼Œç»™äºˆäºŒæ¬¡å¼•å¯¼
   - å¦‚åæ€æµäºè¡¨é¢ï¼Œæç¤ºï¼š"èƒ½å¦æ›´å…·ä½“åœ°è¯´æ˜...?"

**éªŒæ”¶æ ‡å‡†**:
- [ ] ç”¨æˆ·å®Œæˆç»ƒä¹ åå¿…é¡»å¡«å†™åæ€æ‰èƒ½ç»§ç»­
- [ ] åæ€å†…å®¹è‡³å°‘50+30å­—
- [ ] åæ€æ•°æ®æˆåŠŸå­˜å‚¨åˆ°æ•°æ®åº“
- [ ] åæ€å†…å®¹åœ¨"å­¦ä¹ è¿›åº¦"é¡µé¢å¯æŸ¥çœ‹

**æ—¶é—´ä¼°ç®—**: 2å¤©
**æŠ€æœ¯å¤æ‚åº¦**: ä½
**ä¾èµ–é¡¹**: æ— 

---

#### æ”¹è¿›1.2: é‡æ„ä¸ºçº¿æ€§å­¦ä¹ æµç¨‹

**éœ€æ±‚æè¿°**:
å°†å½“å‰çš„ä¸‰Tabå¹¶è¡Œè®¾è®¡ï¼Œé‡æ„ä¸ºç¬¦åˆè®¤çŸ¥å±‚çº§çš„çº¿æ€§æ¸è¿›æµç¨‹ã€‚

**ç”¨æˆ·æ•…äº‹**:
```
ä½œä¸ºå­¦ä¹ è€…
å½“æˆ‘å¼€å§‹ä¸€é“æ–°ç»ƒä¹ æ—¶
æˆ‘å¸Œæœ›ç³»ç»ŸæŒ‰ç…§å­¦ä¹ è§„å¾‹å¼•å¯¼æˆ‘é€æ­¥æ·±å…¥
è€Œä¸æ˜¯é¢å¯¹å¤šä¸ªTabä¸çŸ¥ä»ä½•å¼€å§‹
```

**åŠŸèƒ½è¦æ±‚**:

1. **6æ­¥çº¿æ€§æµç¨‹è®¾è®¡**
   ```
   Step 1: æ¦‚å¿µæ¿€æ´» (Concept Activation)
     â†’ ç›®æ ‡: æ¿€æ´»å…ˆéªŒçŸ¥è¯†
     â†’ å†…å®¹: æ€ç»´ç»´åº¦çš„æ ¸å¿ƒæ¦‚å¿µå¡ç‰‡
     â†’ æ“ä½œ: "ç†è§£äº†ï¼Œçœ‹æ¡ˆä¾‹"

   Step 2: æ¡ˆä¾‹å­¦ä¹  (Case Study)
     â†’ ç›®æ ‡: ç†è§£æ¦‚å¿µåœ¨çœŸå®åœºæ™¯ä¸­çš„åº”ç”¨
     â†’ å†…å®¹: AIç”Ÿæˆçš„æ¡ˆä¾‹åˆ†æï¼ˆç°æœ‰åŠŸèƒ½ï¼‰
     â†’ æ“ä½œ: "å­¦ä¹ å®Œæ¯•ï¼Œå¼€å§‹ç»ƒä¹ "

   Step 3: é¢˜ç›®å‘ˆç° (Problem Presentation)
     â†’ ç›®æ ‡: æ˜ç¡®ä»»åŠ¡è¦æ±‚
     â†’ å†…å®¹: é¢˜ç›®+èƒŒæ™¯ä¿¡æ¯
     â†’ æ“ä½œ: "å¼€å§‹æ€è€ƒ"

   Step 4: å¼•å¯¼æ€§æ€è€ƒ (Guided Thinking)
     â†’ ç›®æ ‡: è„šæ‰‹æ¶å¼å¼•å¯¼
     â†’ å†…å®¹: å¼•å¯¼é—®é¢˜é€ä¸ªå›ç­”ï¼ˆå¸¦å³æ—¶åé¦ˆï¼‰
     â†’ æ“ä½œ: "å®Œæˆå¼•å¯¼æ€è€ƒ"

   Step 5: å®Œæ•´ä½œç­” (Full Answer)
     â†’ ç›®æ ‡: æ•´åˆæ€è€ƒå½¢æˆå®Œæ•´ç­”æ¡ˆ
     â†’ å†…å®¹: Textareaè¾“å…¥ï¼ˆå¯å‚è€ƒå¼•å¯¼é—®é¢˜ç­”æ¡ˆï¼‰
     â†’ æ“ä½œ: "æäº¤ç­”æ¡ˆ"

   Step 6: è¯„ä¼°ä¸åé¦ˆ (Evaluation & Feedback)
     â†’ ç›®æ ‡: è·å¾—AIåé¦ˆ
     â†’ å†…å®¹: å¾—åˆ†+ä¼˜ç¼ºç‚¹+æ”¹è¿›å»ºè®®
     â†’ æ“ä½œ: "æŸ¥çœ‹åé¦ˆ"

   Step 7: åæ€æ€»ç»“ (Reflection)
     â†’ ç›®æ ‡: æŠ½è±¡æ¦‚å¿µåŒ–
     â†’ å†…å®¹: åæ€é—®é¢˜ï¼ˆæ”¹è¿›1.1ï¼‰
     â†’ æ“ä½œ: "å®Œæˆæœ¬é¢˜"
   ```

2. **UIå®ç°**
   ```typescript
   // çŠ¶æ€æœºè®¾è®¡
   type FlowStep =
     | 'concept'      // Step 1
     | 'case'         // Step 2
     | 'problem'      // Step 3
     | 'guided'       // Step 4
     | 'answer'       // Step 5
     | 'feedback'     // Step 6
     | 'reflection'   // Step 7

   const [currentStep, setCurrentStep] = useState<FlowStep>('concept')

   // è¿›åº¦æŒ‡ç¤ºå™¨
   <ProgressBar>
     {steps.map((step, index) => (
       <Step
         active={currentStep === step.id}
         completed={completedSteps.includes(step.id)}
       />
     ))}
   </ProgressBar>

   // åªæ¸²æŸ“å½“å‰æ­¥éª¤
   {currentStep === 'concept' && <ConceptActivation />}
   {currentStep === 'case' && <CaseAnalysis />}
   {currentStep === 'problem' && <ProblemPresentation />}
   {currentStep === 'guided' && <GuidedThinking />}
   {currentStep === 'answer' && <AnswerInput />}
   {currentStep === 'feedback' && <AIFeedback />}
   {currentStep === 'reflection' && <ReflectionSummary />}
   ```

3. **æ­¥éª¤é—´æ•°æ®ä¼ é€’**
   ```typescript
   interface PracticeSessionState {
     step: FlowStep
     conceptUnderstood: boolean
     caseStudyViewed: boolean
     guidedAnswers: { [questionId: string]: string }
     fullAnswer: string
     evaluation: PracticeEvaluation | null
     reflection: ReflectionData | null
   }
   ```

4. **è¿”å›æœºåˆ¶**
   - å…è®¸ç”¨æˆ·è¿”å›ä¸Šä¸€æ­¥æŸ¥çœ‹å†…å®¹
   - ä¸å…è®¸è·³è¿‡æ­¥éª¤ï¼ˆé™¤Step 1æ¦‚å¿µæ¿€æ´»å¯è·³è¿‡ï¼‰

**éªŒæ”¶æ ‡å‡†**:
- [ ] ç”¨æˆ·é¦–æ¬¡è¿›å…¥ç»ƒä¹ çœ‹åˆ°Step 1æ¦‚å¿µæ¿€æ´»
- [ ] å¿…é¡»æŒ‰é¡ºåºå®Œæˆæ¯ä¸ªæ­¥éª¤
- [ ] è¿›åº¦æ¡æ¸…æ™°æ˜¾ç¤ºå½“å‰ä½ç½®
- [ ] å¯ä»¥è¿”å›æŸ¥çœ‹ä¹‹å‰æ­¥éª¤çš„å†…å®¹
- [ ] Step 4å¼•å¯¼é—®é¢˜å¯é€ä¸ªå›ç­”
- [ ] å®ŒæˆStep 7æ‰èƒ½å¼€å§‹ä¸‹ä¸€é¢˜

**æ—¶é—´ä¼°ç®—**: 3å¤©
**æŠ€æœ¯å¤æ‚åº¦**: ä¸­
**ä¾èµ–é¡¹**: æ”¹è¿›1.1ï¼ˆåæ€ç¯èŠ‚ï¼‰

---

#### æ”¹è¿›1.3: å¼•å¯¼é—®é¢˜å³æ—¶åé¦ˆç³»ç»Ÿ

**éœ€æ±‚æè¿°**:
å°†é™æ€çš„å¼•å¯¼é—®é¢˜åˆ—è¡¨æ”¹é€ ä¸ºäº¤äº’å¼é—®ç­”ç³»ç»Ÿï¼Œæ¯ä¸ªå¼•å¯¼é—®é¢˜å¯å•ç‹¬å›ç­”å¹¶è·å¾—AIå³æ—¶åé¦ˆã€‚

**ç”¨æˆ·æ•…äº‹**:
```
ä½œä¸ºå­¦ä¹ è€…
å½“æˆ‘å›ç­”ä¸€ä¸ªå¼•å¯¼é—®é¢˜æ—¶
æˆ‘å¸Œæœ›ç«‹å³çŸ¥é“æˆ‘çš„æ€è·¯æ˜¯å¦æ­£ç¡®
ä»¥ä¾¿åŠæ—¶è°ƒæ•´æ€ç»´æ–¹å‘
```

**åŠŸèƒ½è¦æ±‚**:

1. **äº¤äº’å¼å¼•å¯¼é—®é¢˜ç»„ä»¶**
   ```typescript
   interface GuidedQuestion {
     id: string
     question: string
     purpose: string          // è¿™ä¸ªé—®é¢˜çš„ç›®çš„
     orderIndex: number
     hints?: string[]         // æ¸è¿›å¼æç¤º
     expectedKeyPoints: string[] // AIéªŒè¯ç”¨
   }

   // ç”¨æˆ·ç­”æ¡ˆçŠ¶æ€
   interface GuidedAnswer {
     questionId: string
     userAnswer: string
     feedback?: {
       isOnTrack: boolean
       message: string
       hint?: string
       encouragement?: string
     }
     submittedAt: Date
   }
   ```

2. **UIè®¾è®¡**
   ```tsx
   {guidingQuestions.map((gq, index) => (
     <GuidedQuestionCard key={gq.id}>
       {/* é—®é¢˜æ ‡é¢˜ */}
       <div className="flex items-center justify-between">
         <Badge>{index + 1}/{total}</Badge>
         <span className="text-sm text-gray-500">{gq.purpose}</span>
       </div>

       <h4 className="font-semibold mt-3">{gq.question}</h4>

       {/* ç­”é¢˜åŒºï¼ˆå¯æŠ˜å ï¼‰ */}
       <Collapsible open={activeQuestion === gq.id}>
         <Textarea
           placeholder="å†™ä¸‹ä½ çš„æ€è€ƒ..."
           value={guidedAnswers[gq.id]?.userAnswer || ''}
           onChange={(e) => updateGuidedAnswer(gq.id, e.target.value)}
           className="mt-3"
         />

         {/* æ“ä½œæŒ‰é’® */}
         <div className="flex space-x-2 mt-2">
           <Button
             variant="outline"
             onClick={() => requestHint(gq.id)}
             disabled={!guidedAnswers[gq.id]?.userAnswer}
           >
             ğŸ’¡ éœ€è¦æç¤º
           </Button>
           <Button
             onClick={() => validateGuidedAnswer(gq.id)}
             disabled={!guidedAnswers[gq.id]?.userAnswer?.trim()}
           >
             âœ… æ£€æŸ¥æ€è·¯
           </Button>
         </div>

         {/* AIå³æ—¶åé¦ˆ */}
         {guidedAnswers[gq.id]?.feedback && (
           <Alert
             variant={
               guidedAnswers[gq.id].feedback.isOnTrack
                 ? 'success'
                 : 'warning'
             }
             className="mt-3"
           >
             {guidedAnswers[gq.id].feedback.message}
             {guidedAnswers[gq.id].feedback.hint && (
               <div className="mt-2 text-sm">
                 <strong>æç¤ºï¼š</strong>{guidedAnswers[gq.id].feedback.hint}
               </div>
             )}
           </Alert>
         )}
       </Collapsible>

       {/* å±•å¼€/æ”¶èµ· */}
       <Button
         variant="ghost"
         onClick={() => toggleQuestion(gq.id)}
       >
         {activeQuestion === gq.id ? 'æ”¶èµ·' : 'å±•å¼€å›ç­”'}
       </Button>
     </GuidedQuestionCard>
   ))}

   {/* å®Œæˆæ‰€æœ‰å¼•å¯¼é—®é¢˜å */}
   {allQuestionsAnswered && (
     <Button onClick={() => proceedToFullAnswer()}>
       å®Œæˆå¼•å¯¼æ€è€ƒï¼Œå¼€å§‹æ•´åˆç­”æ¡ˆ â†’
     </Button>
   )}
   ```

3. **åç«¯APIè®¾è®¡**
   ```typescript
   // POST /api/critical-thinking/validate-guided-answer
   interface ValidateGuidedAnswerRequest {
     questionId: string
     guidingQuestionId: string
     userAnswer: string
     thinkingTypeId: string
   }

   interface ValidateGuidedAnswerResponse {
     success: boolean
     data: {
       isOnTrack: boolean      // æ€è·¯æ˜¯å¦æ­£ç¡®
       message: string         // å³æ—¶åé¦ˆæ–‡æœ¬
       hint?: string           // æç¤ºï¼ˆå¦‚æœåç¦»ï¼‰
       encouragement?: string  // é¼“åŠ±è¯­
       keyPointsCovered: string[] // å·²è¦†ç›–çš„è¦ç‚¹
       missingPoints: string[]    // ç¼ºå¤±çš„è¦ç‚¹
     }
   }
   ```

4. **AI Promptè®¾è®¡**
   ```typescript
   const GUIDED_ANSWER_VALIDATION_PROMPT = `
   ä½ æ˜¯æ‰¹åˆ¤æ€§æ€ç»´æ•™ç»ƒã€‚è¯·è¯„ä¼°å­¦ç”Ÿå¯¹å¼•å¯¼é—®é¢˜çš„å›ç­”ã€‚

   æ€ç»´ç»´åº¦: {thinkingType}
   å¼•å¯¼é—®é¢˜: {guidingQuestion}
   å¼•å¯¼é—®é¢˜ç›®çš„: {purpose}
   é¢„æœŸå…³é”®ç‚¹: {expectedKeyPoints}
   å­¦ç”Ÿå›ç­”: {userAnswer}

   è¯·è¯„ä¼°ï¼š
   1. å­¦ç”Ÿçš„æ€è·¯æ˜¯å¦åœ¨æ­£ç¡®æ–¹å‘ï¼Ÿï¼ˆæ˜¯/å¦ï¼‰
   2. ç»™äºˆç®€çŸ­åé¦ˆï¼ˆ1-2å¥è¯ï¼Œè‹æ ¼æ‹‰åº•å¼å¼•å¯¼ï¼‰
   3. å¦‚æœåç¦»ï¼Œæä¾›ä¸€ä¸ªæ¸è¿›å¼æç¤ºï¼ˆä¸ç›´æ¥ç»™ç­”æ¡ˆï¼‰
   4. è¯†åˆ«å­¦ç”Ÿå·²è¦†ç›–çš„å…³é”®ç‚¹å’Œç¼ºå¤±çš„å…³é”®ç‚¹

   è¿”å›JSONæ ¼å¼ï¼š
   {
     "isOnTrack": boolean,
     "message": "åé¦ˆæ–‡æœ¬",
     "hint": "æç¤ºï¼ˆå¯é€‰ï¼‰",
     "keyPointsCovered": ["è¦ç‚¹1"],
     "missingPoints": ["ç¼ºå¤±è¦ç‚¹1"]
   }
   `
   ```

5. **æ¸è¿›å¼æç¤ºæœºåˆ¶**
   - ç¬¬1æ¬¡è¯·æ±‚æç¤ºï¼šç»™å‡ºæ€è€ƒæ–¹å‘
   - ç¬¬2æ¬¡è¯·æ±‚æç¤ºï¼šç»™å‡ºéƒ¨åˆ†å…³é”®è¯
   - ç¬¬3æ¬¡è¯·æ±‚æç¤ºï¼šç»™å‡ºç¤ºä¾‹ç­”æ¡ˆ

**éªŒæ”¶æ ‡å‡†**:
- [ ] ç”¨æˆ·å¯ä»¥é€ä¸ªå›ç­”å¼•å¯¼é—®é¢˜
- [ ] ç‚¹å‡»"æ£€æŸ¥æ€è·¯"å3ç§’å†…å¾—åˆ°AIåé¦ˆ
- [ ] AIåé¦ˆå‡†ç¡®åˆ¤æ–­æ€è·¯æ˜¯å¦æ­£ç¡®
- [ ] æç¤ºç³»ç»Ÿæ¸è¿›å¼å±•å¼€
- [ ] æ‰€æœ‰å¼•å¯¼é—®é¢˜å®Œæˆåæ‰èƒ½è¿›å…¥ä¸‹ä¸€æ­¥
- [ ] å¼•å¯¼é—®é¢˜ç­”æ¡ˆå¯ç¼–è¾‘ï¼ˆåœ¨æäº¤æœ€ç»ˆç­”æ¡ˆå‰ï¼‰

**æ—¶é—´ä¼°ç®—**: 4å¤©
**æŠ€æœ¯å¤æ‚åº¦**: ä¸­é«˜
**ä¾èµ–é¡¹**: æ”¹è¿›1.2ï¼ˆçº¿æ€§æµç¨‹ä¸­çš„Step 4ï¼‰

---

### Phase 2: æ¦‚å¿µå­¦ä¹ ä¸çŸ¥è¯†è¿½è¸ªï¼ˆP1 - é‡è¦ä½†éç´§æ€¥ï¼‰

#### æ”¹è¿›2.1: æ‰©å±•æ¦‚å¿µçŸ¥è¯†åº“

**éœ€æ±‚æè¿°**:
åˆ©ç”¨ç°æœ‰`ThinkingType.learningContent` JSONå­—æ®µï¼Œä¸ºæ¯ä¸ªæ€ç»´ç»´åº¦æ·»åŠ ç»“æ„åŒ–çš„æ¦‚å¿µè®²è§£å†…å®¹ã€‚

**ç”¨æˆ·æ•…äº‹**:
```
ä½œä¸ºæ–°æ‰‹å­¦ä¹ è€…
å½“æˆ‘ç¬¬ä¸€æ¬¡æ¥è§¦ä¸€ä¸ªæ€ç»´ç»´åº¦æ—¶
æˆ‘éœ€è¦å…ˆç†è§£æ ¸å¿ƒæ¦‚å¿µå’Œæ–¹æ³•
ç„¶åå†è¿›è¡Œç»ƒä¹ 
```

**åŠŸèƒ½è¦æ±‚**:

1. **learningContentæ•°æ®ç»“æ„æ‰©å±•**
   ```typescript
   interface LearningContent {
     // æ ¸å¿ƒå®šä¹‰
     definition: string              // æ¸…æ™°çš„å®šä¹‰ï¼ˆ100å­—å†…ï¼‰

     // æ ¸å¿ƒæ–¹æ³•/æ­¥éª¤
     coreMethod: {
       title: string
       description: string
       example: string
     }[]

     // å¸¸è§é™·é˜±
     commonPitfalls: {
       title: string
       description: string
       example: string
       howToAvoid: string
     }[]

     // å…³é”®é—®é¢˜ï¼ˆæ£€æŸ¥æ¸…å•ï¼‰
     keyQuestions: string[]

     // å®ä¾‹æ¼”ç¤º
     examples: {
       scenario: string
       question: string
       goodAnswer: string          // å¥½çš„å›ç­”ç¤ºä¾‹
       poorAnswer: string          // å·®çš„å›ç­”ç¤ºä¾‹
       analysis: string            // åˆ†æä¸¤è€…å·®å¼‚
     }[]

     // è¿›é˜¶èµ„æº
     furtherReading?: {
       title: string
       url: string
       description: string
     }[]
   }
   ```

2. **äº”å¤§ç»´åº¦çš„å†…å®¹å¡«å……**ï¼ˆç¤ºä¾‹ï¼šå› æœåˆ†æï¼‰
   ```typescript
   {
     id: 'causal_analysis',
     name: 'å¤šç»´å½’å› ä¸åˆ©å¼Šæƒè¡¡',
     learningContent: {
       definition: 'å¤šç»´å½’å› æ˜¯æŒ‡ä»å¤šä¸ªè§’åº¦åˆ†æäº‹ä»¶çš„åŸå› ï¼ŒåŒºåˆ†ç›¸å…³æ€§ä¸å› æœæ€§ï¼Œè¯†åˆ«æ··æ·†å› ç´ ï¼Œå»ºç«‹å¯é çš„å› æœæ¨ç†é“¾ã€‚',

       coreMethod: [
         {
           title: 'ç¬¬ä¸€æ­¥ï¼šåŒºåˆ†ç›¸å…³æ€§ä¸å› æœæ€§',
           description: 'ä¸¤ä¸ªç°è±¡åŒæ—¶å‘ç”Ÿä¸ä»£è¡¨æœ‰å› æœå…³ç³»',
           example: 'å†°æ·‡æ·‹é”€é‡â†‘ ä¸ æººæ°´äººæ•°â†‘ åŒæ—¶å‘ç”Ÿï¼Œä½†çœŸæ­£åŸå› æ˜¯æ°”æ¸©â†‘'
         },
         {
           title: 'ç¬¬äºŒæ­¥ï¼šè¯†åˆ«æ··æ·†å› ç´ ',
           description: 'å¯»æ‰¾å¯èƒ½åŒæ—¶å½±å“ä¸¤ä¸ªå˜é‡çš„ç¬¬ä¸‰å› ç´ ',
           example: '...'
         },
         {
           title: 'ç¬¬ä¸‰æ­¥ï¼šå»ºç«‹å› æœé“¾',
           description: 'ç¡®è®¤æ—¶é—´é¡ºåºã€æœºåˆ¶å’Œå¿…è¦æ€§',
           example: '...'
         }
       ],

       commonPitfalls: [
         {
           title: 'å°†ç›¸å…³æ€§ç­‰åŒäºå› æœæ€§',
           description: 'ä»…å› ä¸ºAå’ŒBåŒæ—¶å‘ç”Ÿå°±è®¤ä¸ºAå¯¼è‡´B',
           example: 'ç ”ç©¶å‘ç°å–å’–å•¡çš„äººæ›´èªæ˜ â†’ ç»“è®ºï¼šå’–å•¡è®©äººèªæ˜',
           howToAvoid: 'é—®è‡ªå·±ï¼šæ˜¯å¦å­˜åœ¨ç¬¬ä¸‰å› ç´ ï¼ˆå¦‚æœ¬æ¥èªæ˜çš„äººæ›´çˆ±å–å’–å•¡ï¼‰ï¼Ÿ'
         },
         // ...æ›´å¤šé™·é˜±
       ],

       keyQuestions: [
         'è¿™ä¸¤ä¸ªç°è±¡æ˜¯å·§åˆè¿˜æ˜¯æœ‰å› æœå…³ç³»ï¼Ÿ',
         'æ˜¯å¦å­˜åœ¨æœªè€ƒè™‘çš„æ··æ·†å› ç´ ï¼Ÿ',
         'å› æœæ–¹å‘æ˜¯å¦æ˜ç¡®ï¼Ÿï¼ˆAâ†’B è¿˜æ˜¯ Bâ†’Aï¼Ÿï¼‰',
         'æ˜¯ç›´æ¥å› æœè¿˜æ˜¯é—´æ¥å› æœï¼Ÿ',
         'å› æœå…³ç³»æ˜¯å¿…ç„¶è¿˜æ˜¯æ¦‚ç‡æ€§çš„ï¼Ÿ'
       ],

       examples: [
         {
           scenario: 'æŸåŸå¸‚çŠ¯ç½ªç‡ä¸‹é™ä¸è­¦å¯Ÿæ•°é‡å¢åŠ åŒæ—¶å‘ç”Ÿ',
           question: 'æ˜¯è­¦å¯Ÿæ•°é‡å¢åŠ å¯¼è‡´çŠ¯ç½ªç‡ä¸‹é™å—ï¼Ÿ',
           goodAnswer: 'éœ€è¦è€ƒè™‘ï¼š1) æ—¶é—´é¡ºåºï¼ˆè­¦å¯Ÿå¢åŠ æ˜¯å¦åœ¨çŠ¯ç½ªç‡ä¸‹é™ä¹‹å‰ï¼‰2) å…¶ä»–å› ç´ ï¼ˆç»æµæ”¹å–„ã€æ•™è‚²æ°´å¹³æå‡ï¼‰3) ç›¸é‚»åŸå¸‚çš„å¯¹æ¯”æ•°æ®',
           poorAnswer: 'æ˜¯çš„ï¼Œè­¦å¯Ÿå¤šäº†çŠ¯ç½ªå½“ç„¶å°‘',
           analysis: 'å¥½çš„å›ç­”è¯†åˆ«äº†å¤šä¸ªå¯èƒ½çš„æ··æ·†å› ç´ ï¼Œå·®çš„å›ç­”ç›´æ¥å‡è®¾å› æœå…³ç³»'
         }
       ]
     }
   }
   ```

3. **æ¦‚å¿µæ¿€æ´»ç»„ä»¶è®¾è®¡**ï¼ˆStep 1ä½¿ç”¨ï¼‰
   ```tsx
   <ConceptActivationCard>
     {/* å®šä¹‰ */}
     <Section title="ä»€ä¹ˆæ˜¯{typeName}ï¼Ÿ">
       <p className="text-lg">{learningContent.definition}</p>
     </Section>

     {/* æ ¸å¿ƒæ–¹æ³• */}
     <Section title="æ ¸å¿ƒæ–¹æ³•">
       <div className="space-y-4">
         {learningContent.coreMethod.map((method, i) => (
           <MethodCard key={i}>
             <Badge>{i + 1}</Badge>
             <h4>{method.title}</h4>
             <p>{method.description}</p>
             <Alert variant="info">
               <Lightbulb />
               <span>ç¤ºä¾‹ï¼š{method.example}</span>
             </Alert>
           </MethodCard>
         ))}
       </div>
     </Section>

     {/* å¸¸è§é™·é˜± */}
     <Section title="å¸¸è§é™·é˜±" collapsible>
       {learningContent.commonPitfalls.map((pitfall, i) => (
         <PitfallCard key={i}>
           <AlertTriangle className="text-orange-500" />
           <h4>{pitfall.title}</h4>
           <p>{pitfall.description}</p>
           <div className="bg-red-50 p-3 rounded">
             <strong>âŒ é”™è¯¯ç¤ºä¾‹ï¼š</strong>{pitfall.example}
           </div>
           <div className="bg-green-50 p-3 rounded">
             <strong>âœ… å¦‚ä½•é¿å…ï¼š</strong>{pitfall.howToAvoid}
           </div>
         </PitfallCard>
       ))}
     </Section>

     {/* æ£€æŸ¥æ¸…å• */}
     <Section title="æ€è€ƒæ£€æŸ¥æ¸…å•">
       <Checklist items={learningContent.keyQuestions} />
     </Section>

     {/* å¥½ç­”æ¡ˆ vs å·®ç­”æ¡ˆç¤ºä¾‹ */}
     <Section title="ç­”é¢˜ç¤ºä¾‹å¯¹æ¯”">
       {learningContent.examples.map((ex, i) => (
         <ExampleCard key={i}>
           <h4>{ex.scenario}</h4>
           <p><strong>é—®é¢˜ï¼š</strong>{ex.question}</p>
           <ComparisonView>
             <div className="good-answer">
               <Badge variant="success">ä¼˜ç§€å›ç­”</Badge>
               <p>{ex.goodAnswer}</p>
             </div>
             <div className="poor-answer">
               <Badge variant="destructive">æ¬ ä½³å›ç­”</Badge>
               <p>{ex.poorAnswer}</p>
             </div>
           </ComparisonView>
           <Alert>
             <Info />
             <strong>åˆ†æï¼š</strong>{ex.analysis}
           </Alert>
         </ExampleCard>
       ))}
     </Section>

     {/* è¡ŒåŠ¨æŒ‰é’® */}
     <div className="flex space-x-3 mt-6">
       <Button onClick={proceedToCaseStudy} size="lg">
         ç†è§£äº†ï¼Œçœ‹å®é™…æ¡ˆä¾‹ â†’
       </Button>
       <Button variant="outline" onClick={skipToPractice}>
         æˆ‘å·²ç†Ÿæ‚‰ï¼Œç›´æ¥ç»ƒä¹ 
       </Button>
     </div>
   </ConceptActivationCard>
   ```

4. **å†…å®¹å¡«å……ä»»åŠ¡**
   - [ ] å› æœåˆ†æï¼ˆcausal_analysisï¼‰
   - [ ] å‰æè´¨ç–‘ï¼ˆpremise_challengeï¼‰
   - [ ] è°¬è¯¯æ£€æµ‹ï¼ˆfallacy_detectionï¼‰
   - [ ] è¿­ä»£åæ€ï¼ˆiterative_reflectionï¼‰
   - [ ] çŸ¥è¯†è¿ç§»ï¼ˆconnection_transferï¼‰

**éªŒæ”¶æ ‡å‡†**:
- [ ] äº”ä¸ªæ€ç»´ç»´åº¦çš„learningContentå­—æ®µå…¨éƒ¨å¡«å……
- [ ] æ¯ä¸ªç»´åº¦è‡³å°‘åŒ…å«3ä¸ªæ ¸å¿ƒæ–¹æ³•ã€3ä¸ªé™·é˜±ã€5ä¸ªå…³é”®é—®é¢˜
- [ ] æ¦‚å¿µæ¿€æ´»ç»„ä»¶åœ¨Step 1æ­£ç¡®æ¸²æŸ“
- [ ] ç”¨æˆ·å¯é€‰æ‹©"è·³è¿‡æ¦‚å¿µ"ç›´æ¥è¿›å…¥ç»ƒä¹ 
- [ ] æ¦‚å¿µå†…å®¹å¯åœ¨ä»»ä½•æ—¶å€™é€šè¿‡ä¾§è¾¹æ è®¿é—®

**æ—¶é—´ä¼°ç®—**: 2å¤©ï¼ˆå¼€å‘1å¤©+å†…å®¹å¡«å……1å¤©ï¼‰
**æŠ€æœ¯å¤æ‚åº¦**: ä½
**ä¾èµ–é¡¹**: æ”¹è¿›1.2ï¼ˆçº¿æ€§æµç¨‹Step 1ï¼‰

---

#### æ”¹è¿›2.2: çŸ¥è¯†ç‚¹æŒæ¡åº¦è¿½è¸ª

**éœ€æ±‚æè¿°**:
å»ºç«‹è½»é‡çº§çš„çŸ¥è¯†ç‚¹æŒæ¡åº¦è¿½è¸ªç³»ç»Ÿï¼Œä¸ºæœªæ¥çš„æ™ºèƒ½æ¨èæä¾›æ•°æ®åŸºç¡€ã€‚

**ç”¨æˆ·æ•…äº‹**:
```
ä½œä¸ºå­¦ä¹ è€…
æˆ‘å¸Œæœ›ç³»ç»Ÿèƒ½è®°ä½æˆ‘åœ¨æ¯ä¸ªçŸ¥è¯†ç‚¹ä¸Šçš„æŒæ¡æƒ…å†µ
è¿™æ ·æˆ‘å¯ä»¥çœ‹åˆ°è‡ªå·±çš„è¿›æ­¥
ä¹Ÿèƒ½å¾—åˆ°é’ˆå¯¹æ€§çš„ç»ƒä¹ æ¨è
```

**åŠŸèƒ½è¦æ±‚**:

1. **æ•°æ®åº“Schema**
   ```typescript
   // prisma/schema.prisma æ–°å¢
   model KnowledgePointMastery {
     id            String   @id @default(cuid())
     userId        String
     thinkingTypeId String
     conceptKey    String   // æ¦‚å¿µæ ‡è¯†ç¬¦
     masteryLevel  Float    @default(0.0) // 0-1
     lastPracticed DateTime @default(now())
     practiceCount Int      @default(0)
     createdAt     DateTime @default(now())
     updatedAt     DateTime @updatedAt

     user User @relation(fields: [userId], references: [id], onDelete: Cascade)

     @@unique([userId, thinkingTypeId, conceptKey])
     @@index([userId, lastPracticed])
     @@index([userId, masteryLevel])
     @@map("knowledge_point_mastery")
   }
   ```

2. **æ¦‚å¿µæ˜ å°„è¡¨**ï¼ˆæ¯ä¸ªç»´åº¦çš„æ ¸å¿ƒæ¦‚å¿µï¼‰
   ```typescript
   const CONCEPT_MAPPING = {
     causal_analysis: [
       { key: 'correlation_vs_causation', name: 'ç›¸å…³æ€§ä¸å› æœæ€§' },
       { key: 'confounding_factors', name: 'æ··æ·†å› ç´ è¯†åˆ«' },
       { key: 'causal_chain', name: 'å› æœé“¾å»ºç«‹' },
       { key: 'necessity_sufficiency', name: 'å¿…è¦æ¡ä»¶ä¸å……åˆ†æ¡ä»¶' },
       { key: 'reverse_causality', name: 'åå‘å› æœ' }
     ],
     premise_challenge: [
       { key: 'implicit_premises', name: 'éšå«å‰æè¯†åˆ«' },
       { key: 'premise_evaluation', name: 'å‰æåˆç†æ€§è¯„ä¼°' },
       { key: 'reframe_problem', name: 'é—®é¢˜é‡æ–°æ¡†å®š' },
       { key: 'assumption_testing', name: 'å‡è®¾æ£€éªŒ' }
     ],
     // ... å…¶ä»–ç»´åº¦
   }
   ```

3. **æŒæ¡åº¦è®¡ç®—é€»è¾‘**
   ```typescript
   // ç®€åŒ–ç‰ˆç®—æ³•ï¼ˆMVPé˜¶æ®µï¼‰
   async function updateKnowledgeMastery(
     userId: string,
     thinkingTypeId: string,
     questionId: string,
     score: number // 0-100
   ) {
     // 1. æå–æœ¬é¢˜æ¶‰åŠçš„æ¦‚å¿µï¼ˆåŸºäºtagsæˆ–é¢˜ç›®åˆ†æï¼‰
     const concepts = await extractConceptsFromQuestion(questionId)

     // 2. æ›´æ–°æ¯ä¸ªæ¦‚å¿µçš„æŒæ¡åº¦
     for (const conceptKey of concepts) {
       const existing = await prisma.knowledgePointMastery.findUnique({
         where: {
           userId_thinkingTypeId_conceptKey: {
             userId,
             thinkingTypeId,
             conceptKey
           }
         }
       })

       // åŠ æƒå¹³å‡ç®—æ³•ï¼š70%å†å² + 30%æœ¬æ¬¡
       const newMasteryLevel = existing
         ? existing.masteryLevel * 0.7 + (score / 100) * 0.3
         : score / 100

       await prisma.knowledgePointMastery.upsert({
         where: { userId_thinkingTypeId_conceptKey: {...} },
         update: {
           masteryLevel: newMasteryLevel,
           lastPracticed: new Date(),
           practiceCount: { increment: 1 }
         },
         create: {
           userId,
           thinkingTypeId,
           conceptKey,
           masteryLevel: score / 100,
           practiceCount: 1
         }
       })
     }
   }

   // æ ¹æ®é¢˜ç›®tagsæå–æ¦‚å¿µ
   function extractConceptsFromQuestion(question: Question): string[] {
     // ç®€å•è§„åˆ™åŒ¹é…ï¼ˆMVPé˜¶æ®µï¼‰
     const concepts = []
     const tags = question.tags as string[]

     // ç¤ºä¾‹è§„åˆ™
     if (tags.includes('å› æœå…³ç³»') || tags.includes('ç›¸å…³æ€§')) {
       concepts.push('correlation_vs_causation')
     }
     if (tags.includes('æ··æ·†å› ç´ ') || tags.includes('ç¬¬ä¸‰å˜é‡')) {
       concepts.push('confounding_factors')
     }
     // ... æ›´å¤šè§„åˆ™

     return concepts
   }
   ```

4. **å‰ç«¯å¯è§†åŒ–ç»„ä»¶**
   ```tsx
   // /learn/dashboard æ–°å¢
   <Card title="çŸ¥è¯†ç‚¹æŒæ¡é›·è¾¾å›¾">
     <RadarChart
       data={knowledgeMasteryData.map(kp => ({
         concept: kp.conceptName,
         mastery: kp.masteryLevel * 100,
         fullMark: 100
       }))}
     />
     <div className="grid grid-cols-2 gap-3 mt-4">
       {knowledgeMasteryData.map(kp => (
         <div key={kp.conceptKey} className="flex items-center justify-between">
           <span className="text-sm">{kp.conceptName}</span>
           <div className="flex items-center space-x-2">
             <Progress value={kp.masteryLevel * 100} className="w-20" />
             <span className="text-sm font-semibold">
               {Math.round(kp.masteryLevel * 100)}%
             </span>
           </div>
         </div>
       ))}
     </div>
   </Card>
   ```

5. **APIç«¯ç‚¹**
   ```typescript
   // GET /api/knowledge-mastery/summary?userId={userId}
   interface KnowledgeMasterySummary {
     thinkingTypeId: string
     thinkingTypeName: string
     concepts: {
       conceptKey: string
       conceptName: string
       masteryLevel: number      // 0-1
       practiceCount: number
       lastPracticed: Date | null
     }[]
     overallMastery: number      // å¹³å‡å€¼
   }
   ```

**éªŒæ”¶æ ‡å‡†**:
- [ ] ç”¨æˆ·å®Œæˆç»ƒä¹ åè‡ªåŠ¨æ›´æ–°çŸ¥è¯†ç‚¹æŒæ¡åº¦
- [ ] æŒæ¡åº¦æ•°æ®æ­£ç¡®å­˜å‚¨åˆ°æ•°æ®åº“
- [ ] /learn/dashboardæ˜¾ç¤ºé›·è¾¾å›¾
- [ ] é›·è¾¾å›¾æ•°æ®å‡†ç¡®åæ˜ ç”¨æˆ·æŒæ¡æƒ…å†µ
- [ ] å¯ç‚¹å‡»çŸ¥è¯†ç‚¹æŸ¥çœ‹è¯¦ç»†ç»ƒä¹ å†å²

**æ—¶é—´ä¼°ç®—**: 3å¤©
**æŠ€æœ¯å¤æ‚åº¦**: ä¸­
**ä¾èµ–é¡¹**: æ— ï¼ˆç‹¬ç«‹åŠŸèƒ½ï¼‰

---

#### æ”¹è¿›2.3: æ™ºèƒ½ç»ƒä¹ æ¨èä¼˜åŒ–

**éœ€æ±‚æè¿°**:
åŸºäºçŸ¥è¯†ç‚¹æŒæ¡åº¦æ•°æ®ï¼Œä¼˜åŒ–æ¯æ—¥ç»ƒä¹ æ¨èç®—æ³•ã€‚

**ç”¨æˆ·æ•…äº‹**:
```
ä½œä¸ºå­¦ä¹ è€…
å½“æˆ‘å¼€å§‹æ¯æ—¥ç»ƒä¹ æ—¶
æˆ‘å¸Œæœ›ç³»ç»Ÿæ¨èæˆ‘æœ€éœ€è¦ç»ƒä¹ çš„å†…å®¹
è€Œä¸æ˜¯éšæœºæˆ–ä»…åŸºäºæ¬¡æ•°çš„æ¨è
```

**åŠŸèƒ½è¦æ±‚**:

1. **æ¨èç®—æ³•è®¾è®¡**
   ```typescript
   interface SmartRecommendation {
     thinkingTypeId: string
     reason: string
     priority: 'high' | 'medium' | 'low'
     targetConcepts: string[]  // æœ¬æ¬¡æ¨èé’ˆå¯¹çš„çŸ¥è¯†ç‚¹
   }

   async function getSmartRecommendation(
     userId: string
   ): Promise<SmartRecommendation> {
     // 1. è·å–ç”¨æˆ·æ‰€æœ‰çŸ¥è¯†ç‚¹æŒæ¡åº¦
     const masteryData = await prisma.knowledgePointMastery.findMany({
       where: { userId },
       include: { thinkingType: true }
     })

     // 2. è®¡ç®—æ¯ä¸ªç»´åº¦çš„å¹³å‡æŒæ¡åº¦
     const dimensionScores = groupBy(masteryData, 'thinkingTypeId')
       .map(([typeId, concepts]) => ({
         thinkingTypeId: typeId,
         avgMastery: average(concepts.map(c => c.masteryLevel)),
         conceptCount: concepts.length,
         lowestConcept: minBy(concepts, 'masteryLevel')
       }))

     // 3. è€ƒè™‘é—å¿˜æ›²çº¿ï¼ˆæœ€åç»ƒä¹ æ—¶é—´ï¼‰
     const forgettingScore = masteryData.map(kp => {
       const daysSinceLastPractice =
         (Date.now() - kp.lastPracticed.getTime()) / (1000 * 60 * 60 * 24)
       // 3å¤©åå¼€å§‹é—å¿˜
       const forgettingFactor = Math.min(daysSinceLastPractice / 7, 1)
       return {
         ...kp,
         adjustedMastery: kp.masteryLevel * (1 - forgettingFactor * 0.3)
       }
     })

     // 4. ç»¼åˆè¯„åˆ†ï¼šæŒæ¡åº¦ï¼ˆ40%ï¼‰ + é—å¿˜å› ç´ ï¼ˆ30%ï¼‰ + ç»ƒä¹ é¢‘ç‡ï¼ˆ30%ï¼‰
     const recommendationScores = dimensionScores.map(dim => {
       const masteryWeight = (1 - dim.avgMastery) * 0.4
       const forgettingWeight = getForgettingWeight(dim.thinkingTypeId) * 0.3
       const practiceFreqWeight = getPracticeFrequency(dim.thinkingTypeId) * 0.3

       return {
         thinkingTypeId: dim.thinkingTypeId,
         score: masteryWeight + forgettingWeight + practiceFreqWeight,
         reason: generateReason(dim)
       }
     })

     // 5. è¿”å›å¾—åˆ†æœ€é«˜çš„æ¨è
     const topRecommendation = maxBy(recommendationScores, 'score')

     return {
       thinkingTypeId: topRecommendation.thinkingTypeId,
       reason: topRecommendation.reason,
       priority: topRecommendation.score > 0.7 ? 'high' :
                 topRecommendation.score > 0.4 ? 'medium' : 'low',
       targetConcepts: getWeakConcepts(topRecommendation.thinkingTypeId)
     }
   }

   function generateReason(dim: DimensionScore): string {
     if (dim.avgMastery < 0.3) {
       return `ã€${dim.name}ã€‘æŒæ¡åº¦è¾ƒä½ï¼ˆ${Math.round(dim.avgMastery * 100)}%ï¼‰ï¼Œå»ºè®®é‡ç‚¹ç»ƒä¹ `
     }
     if (dim.daysSinceLastPractice > 7) {
       return `è·ç¦»ä¸Šæ¬¡ç»ƒä¹ ã€${dim.name}ã€‘å·²æœ‰${dim.daysSinceLastPractice}å¤©ï¼Œå»ºè®®å¤ä¹ å·©å›º`
     }
     return `ç»§ç»­ç»ƒä¹ ã€${dim.name}ã€‘ä»¥è¿›ä¸€æ­¥æå‡`
   }
   ```

2. **UIå±•ç¤º**
   ```tsx
   // DailyPracticeMain.tsx æ”¹è¿›
   <RecommendationSection>
     <Badge
       variant={recommendation.priority === 'high' ? 'destructive' : 'default'}
     >
       {recommendation.priority === 'high' ? 'é‡ç‚¹æ¨è' : 'AIæ¨è'}
     </Badge>

     <Card className="mt-3">
       <CardHeader>
         <div className="flex items-center space-x-2">
           <Sparkles className="h-5 w-5 text-yellow-500" />
           <CardTitle>ä»Šæ—¥æ™ºèƒ½æ¨è</CardTitle>
         </div>
       </CardHeader>
       <CardContent>
         <h3 className="text-xl font-bold mb-2">
           {getThinkingTypeName(recommendation.thinkingTypeId)}
         </h3>
         <p className="text-gray-600 mb-4">{recommendation.reason}</p>

         {/* ç›®æ ‡çŸ¥è¯†ç‚¹ */}
         <div className="mb-4">
           <span className="text-sm text-gray-500">æœ¬æ¬¡ç»ƒä¹ é‡ç‚¹ï¼š</span>
           <div className="flex flex-wrap gap-2 mt-2">
             {recommendation.targetConcepts.map(concept => (
               <Badge key={concept} variant="outline">
                 {getConceptName(concept)}
               </Badge>
             ))}
           </div>
         </div>

         <Button
           size="lg"
           onClick={() => startPractice(recommendation.thinkingTypeId)}
           className="w-full"
         >
           <Rocket className="mr-2" />
           å¼€å§‹æ™ºèƒ½æ¨èç»ƒä¹ 
         </Button>
       </CardContent>
     </Card>
   </RecommendationSection>
   ```

3. **æ¨èå¤šæ ·æ€§**
   - å…è®¸ç”¨æˆ·"æ¢ä¸€ä¸ªæ¨è"
   - ä¿å­˜æ¨èå†å²ï¼ˆé¿å…é‡å¤æ¨èï¼‰
   - ç”¨æˆ·å¯é€‰æ‹©"æˆ‘æƒ³ç»ƒä¹ å…¶ä»–ç»´åº¦"

**éªŒæ”¶æ ‡å‡†**:
- [ ] æ¨èç®—æ³•åŸºäºæŒæ¡åº¦æ•°æ®è¿è¡Œ
- [ ] æ¨èç†ç”±æ¸…æ™°åˆç†
- [ ] ä¼˜å…ˆæ¨èæŒæ¡åº¦ä½çš„ç»´åº¦
- [ ] è€ƒè™‘é—å¿˜æ›²çº¿ï¼ˆ7å¤©æœªç»ƒä¹ æç¤ºå¤ä¹ ï¼‰
- [ ] ç”¨æˆ·å¯ä»¥å¿½ç•¥æ¨èè‡ªä¸»é€‰æ‹©

**æ—¶é—´ä¼°ç®—**: 1å¤©
**æŠ€æœ¯å¤æ‚åº¦**: ä¸­ä½
**ä¾èµ–é¡¹**: æ”¹è¿›2.2ï¼ˆçŸ¥è¯†ç‚¹è¿½è¸ªï¼‰

---

## ğŸ“Š å®æ–½è®¡åˆ’

### Sprint 1: æ ¸å¿ƒé—­ç¯å®Œå–„ï¼ˆWeek 1ï¼‰

**ç›®æ ‡**: å®Œæˆæœ€å…³é”®çš„å­¦ä¹ æµç¨‹æ”¹è¿›

**ä»»åŠ¡åˆ—è¡¨**:
- [ ] Day 1-2: å®ç°åæ€æ€»ç»“ç¯èŠ‚ï¼ˆæ”¹è¿›1.1ï¼‰
  - [ ] è®¾è®¡Reflectionè¡¨å•ç»„ä»¶
  - [ ] æ‰©å±•PracticeSessionè¡¨å­—æ®µ
  - [ ] å®ç°åæ€æ•°æ®å­˜å‚¨API
  - [ ] é›†æˆåˆ°PracticeSessionæµç¨‹

- [ ] Day 3-5: é‡æ„ä¸ºçº¿æ€§æµç¨‹ï¼ˆæ”¹è¿›1.2ï¼‰
  - [ ] è®¾è®¡çŠ¶æ€æœºå’ŒStepç»„ä»¶
  - [ ] é‡æ„PracticeSessionç»„ä»¶æ¶æ„
  - [ ] å®ç°7æ­¥æµç¨‹æ¸²æŸ“é€»è¾‘
  - [ ] æµ‹è¯•æµç¨‹å®Œæ•´æ€§

**éªŒæ”¶æ ‡å‡†**:
- ç”¨æˆ·å®Œæˆç»ƒä¹ å¿…é¡»å¡«å†™åæ€
- çº¿æ€§æµç¨‹è¿è¡Œæµç•…æ— é˜»å¡
- è¿›åº¦æ¡æ¸…æ™°å±•ç¤ºå½“å‰æ­¥éª¤

---

### Sprint 2: äº¤äº’å¼å¼•å¯¼ç³»ç»Ÿï¼ˆWeek 2, Day 1-4ï¼‰

**ç›®æ ‡**: å®ç°å¼•å¯¼é—®é¢˜çš„å³æ—¶åé¦ˆ

**ä»»åŠ¡åˆ—è¡¨**:
- [ ] Day 1: APIå¼€å‘
  - [ ] è®¾è®¡AI Promptæ¨¡æ¿
  - [ ] å®ç°/api/critical-thinking/validate-guided-answer
  - [ ] æµ‹è¯•AIåé¦ˆå‡†ç¡®æ€§

- [ ] Day 2-3: å‰ç«¯ç»„ä»¶å¼€å‘
  - [ ] å¼€å‘GuidedQuestionCardç»„ä»¶
  - [ ] å®ç°æŠ˜å /å±•å¼€äº¤äº’
  - [ ] é›†æˆAIåé¦ˆæ˜¾ç¤º

- [ ] Day 4: é›†æˆä¸æµ‹è¯•
  - [ ] é›†æˆåˆ°çº¿æ€§æµç¨‹Step 4
  - [ ] ç«¯åˆ°ç«¯æµ‹è¯•
  - [ ] ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ

**éªŒæ”¶æ ‡å‡†**:
- æ¯ä¸ªå¼•å¯¼é—®é¢˜å¯ç‹¬ç«‹å›ç­”
- AIåé¦ˆåœ¨3ç§’å†…è¿”å›
- æ¸è¿›å¼æç¤ºæœºåˆ¶å·¥ä½œæ­£å¸¸

---

### Sprint 3: æ¦‚å¿µå­¦ä¹ ä¸è¿½è¸ªï¼ˆWeek 2, Day 5 - Week 3ï¼‰

**ç›®æ ‡**: è¡¥å…¨æ¦‚å¿µå­¦ä¹ ç¯èŠ‚ï¼Œå»ºç«‹çŸ¥è¯†è¿½è¸ªç³»ç»Ÿ

**ä»»åŠ¡åˆ—è¡¨**:
- [ ] Week 2, Day 5: æ¦‚å¿µå†…å®¹å¡«å……
  - [ ] äº”å¤§ç»´åº¦learningContentå¡«å……
  - [ ] ç¼–å†™æ ¸å¿ƒæ–¹æ³•ã€é™·é˜±ã€ç¤ºä¾‹

- [ ] Week 3, Day 1-2: æ¦‚å¿µå±•ç¤ºç»„ä»¶
  - [ ] å¼€å‘ConceptActivationCard
  - [ ] é›†æˆåˆ°çº¿æ€§æµç¨‹Step 1
  - [ ] æµ‹è¯•æ¦‚å¿µå†…å®¹æ¸²æŸ“

- [ ] Week 3, Day 3-5: çŸ¥è¯†ç‚¹è¿½è¸ªç³»ç»Ÿ
  - [ ] åˆ›å»ºKnowledgePointMasteryæ¨¡å‹
  - [ ] å®ç°æŒæ¡åº¦è®¡ç®—é€»è¾‘
  - [ ] å¼€å‘Dashboardé›·è¾¾å›¾ç»„ä»¶
  - [ ] å®ç°æ™ºèƒ½æ¨èç®—æ³•
  - [ ] é›†æˆåˆ°æ¯æ—¥ç»ƒä¹ 

**éªŒæ”¶æ ‡å‡†**:
- äº”å¤§ç»´åº¦æ¦‚å¿µå†…å®¹å®Œæ•´
- çŸ¥è¯†ç‚¹æŒæ¡åº¦æ­£ç¡®è®¡ç®—
- é›·è¾¾å›¾å¯è§†åŒ–æ¸…æ™°
- æ™ºèƒ½æ¨èåˆç†æœ‰æ•ˆ

---

## ğŸ¯ éªŒæ”¶æ ‡å‡†æ€»ç»“

### åŠŸèƒ½å®Œæ•´æ€§
- [ ] 7æ­¥çº¿æ€§å­¦ä¹ æµç¨‹è¿è¡Œæ­£å¸¸
- [ ] åæ€æ€»ç»“ç¯èŠ‚å¼ºåˆ¶å®Œæˆ
- [ ] å¼•å¯¼é—®é¢˜äº¤äº’å¼åé¦ˆç”Ÿæ•ˆ
- [ ] æ¦‚å¿µçŸ¥è¯†åº“å†…å®¹å®Œæ•´
- [ ] çŸ¥è¯†ç‚¹æŒæ¡åº¦è¿½è¸ªå‡†ç¡®
- [ ] æ™ºèƒ½æ¨èç®—æ³•è¿è¡Œ

### ç§‘å­¦æ€§éªŒè¯
- [ ] å®Œæ•´Kolbå­¦ä¹ å¾ªç¯å®ç°
- [ ] ç¬¦åˆBloomè®¤çŸ¥å±‚çº§è®¾è®¡
- [ ] å…ƒè®¤çŸ¥æ”¯æŒæœºåˆ¶å®Œå–„
- [ ] è„šæ‰‹æ¶æ•™å­¦æœ‰æ•ˆå®æ–½
- [ ] è®¤çŸ¥è´Ÿè·æ§åˆ¶åˆç†

### ç”¨æˆ·ä½“éªŒ
- [ ] æ–°æ‰‹ç”¨æˆ·å®Œæˆç‡ >70%
- [ ] å¹³å‡ç»ƒä¹ æ—¶é•¿å¢åŠ è‡³15åˆ†é’Ÿ
- [ ] ç”¨æˆ·åé¦ˆ"æ„Ÿè§‰å­¦åˆ°ä¸œè¥¿" >80%
- [ ] ç³»ç»Ÿå“åº”æ—¶é—´ <3ç§’

### æŠ€æœ¯è´¨é‡
- [ ] ä»£ç é€šè¿‡TypeScriptç¼–è¯‘
- [ ] æ‰€æœ‰APIç«¯ç‚¹æœ‰é”™è¯¯å¤„ç†
- [ ] æ•°æ®åº“è¿ç§»æˆåŠŸè¿è¡Œ
- [ ] å‰ç«¯ç»„ä»¶é€šè¿‡ESLintæ£€æŸ¥

---

## ğŸ“ˆ é¢„æœŸæ•ˆæœ

### å­¦ä¹ æ•ˆæœæŒ‡æ ‡
| æŒ‡æ ‡ | å½“å‰ | æ”¹è¿›åç›®æ ‡ |
|------|------|-----------|
| ç»ƒä¹ å®Œæˆç‡ | ~50% | >70% |
| çŸ¥è¯†ç•™å­˜ç‡ï¼ˆ30å¤©ï¼‰ | ~35% | >55% |
| å¹³å‡å­¦ä¹ æ—¶é•¿ | 8-12åˆ†é’Ÿ | 15åˆ†é’Ÿ |
| ç”¨æˆ·æ»¡æ„åº¦ | æœªæµ‹é‡ | NPS >40 |

### æ•™å­¦ç§‘å­¦æ€§æŒ‡æ ‡
| ç»´åº¦ | æ”¹è¿›å‰ | æ”¹è¿›å |
|------|--------|--------|
| Kolbå¾ªç¯å®Œæ•´æ€§ | 50% | 100% |
| Bloomå±‚çº§è¦†ç›– | 60% | 90% |
| å…ƒè®¤çŸ¥æ”¯æŒ | 20% | 80% |
| è„šæ‰‹æ¶æ•™å­¦ | 30% | 85% |

---

## ğŸš¨ é£é™©ä¸ç¼“è§£ç­–ç•¥

### æŠ€æœ¯é£é™©
1. **AIåé¦ˆè´¨é‡ä¸ç¨³å®š**
   - é£é™©: å¼•å¯¼é—®é¢˜éªŒè¯å‡†ç¡®ç‡ä½
   - ç¼“è§£:
     - å¤šè½®Promptå·¥ç¨‹ä¼˜åŒ–
     - å»ºç«‹éªŒè¯æ•°æ®é›†
     - äººå·¥å®¡æ ¸æ ·æœ¬è¾“å‡º

2. **çº¿æ€§æµç¨‹è¿‡é•¿å¯¼è‡´ç”¨æˆ·æµå¤±**
   - é£é™©: 7æ­¥æµç¨‹å¤ªé•¿ï¼Œç”¨æˆ·ä¸­é€”æ”¾å¼ƒ
   - ç¼“è§£:
     - å…è®¸è€ç”¨æˆ·è·³è¿‡æ¦‚å¿µæ¿€æ´»
     - æ˜¾ç¤ºé¢„è®¡å®Œæˆæ—¶é—´
     - ä¸­é€”ä¿å­˜è¿›åº¦

### ä¸šåŠ¡é£é™©
1. **æ”¹åŠ¨å½±å“ç°æœ‰ç”¨æˆ·ä¹ æƒ¯**
   - é£é™©: è€ç”¨æˆ·ä¸é€‚åº”æ–°æµç¨‹
   - ç¼“è§£:
     - ç°åº¦å‘å¸ƒï¼ˆ10% â†’ 50% â†’ 100%ï¼‰
     - æä¾›"ç»å…¸æ¨¡å¼"å¼€å…³
     - æ”¶é›†ç”¨æˆ·åé¦ˆå¿«é€Ÿè¿­ä»£

2. **å¼€å‘å‘¨æœŸå»¶é•¿**
   - é£é™©: å®é™…å¼€å‘è¶…è¿‡3å‘¨
   - ç¼“è§£:
     - ä¸¥æ ¼æŒ‰ä¼˜å…ˆçº§å®æ–½ï¼ˆP0å¿…é¡»ï¼ŒP1å¯å»¶åï¼‰
     - æ¯æ—¥ç«™ä¼šåŒæ­¥è¿›åº¦
     - å…³é”®è·¯å¾„æå‰è¯†åˆ«

---

## ğŸ“ åç»­ä¼˜åŒ–æ–¹å‘ï¼ˆPost-MVPï¼‰

### Phase 3: é—´éš”é‡å¤ç³»ç»Ÿï¼ˆæœªæ¥ï¼‰
- åŸºäºSM-2ç®—æ³•çš„å¤ä¹ è°ƒåº¦
- é—å¿˜æ›²çº¿é¢„æµ‹
- è‡ªåŠ¨å¤ä¹ æé†’

### Phase 4: ç¤¾äº¤ä¸æ¸¸æˆåŒ–ï¼ˆæœªæ¥ï¼‰
- æˆå°±ç³»ç»Ÿ
- æ’è¡Œæ¦œ
- å¥½å‹PK

### Phase 5: é«˜é˜¶åŠŸèƒ½ï¼ˆæœªæ¥ï¼‰
- è·¨ç»´åº¦ç»¼åˆç»ƒä¹ 
- AIå­¦ä¹ æ•™ç»ƒ
- ä¸ªæ€§åŒ–å­¦ä¹ è·¯å¾„

---

## ğŸ“š å‚è€ƒæ–‡çŒ®

**è®¤çŸ¥ç§‘å­¦ç†è®º**:
- Kolb, D. A. (1984). *Experiential Learning: Experience as the Source of Learning and Development*
- Bloom, B. S. (1956). *Taxonomy of Educational Objectives*
- Vygotsky, L. S. (1978). *Mind in Society: The Development of Higher Psychological Processes*

**æ•™å­¦è®¾è®¡**:
- Sweller, J. (1988). Cognitive Load Theory
- SchÃ¶n, D. A. (1983). The Reflective Practitioner
- Ebbinghaus, H. (1885). Memory: A Contribution to Experimental Psychology

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**æœ€åæ›´æ–°**: 2025-01-12
**ä¸‹æ¬¡å®¡æŸ¥**: Sprint 1å®Œæˆå
